{
  "kind": "build_request",
  "title": "Add USD value display using ICP oracle exchange rates",
  "projectName": "Infinity Wallet",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Create a backend service to fetch real-time exchange rates from ICPSwap oracle for ICP, ckBTC, ckETH, ckSOL, and Infinity Coin to USD conversion",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "using exchange rate conversion from internet computer protocols built in oracle all information from icpswap"
        ]
      },
      "acceptanceCriteria": [
        "Backend exposes a method to retrieve current USD exchange rates for all supported tokens",
        "Exchange rates are fetched from ICPSwap oracle on the Internet Computer",
        "Rates include ICP/USD, ckBTC/USD, ckETH/USD, ckSOL/USD conversions",
        "Method returns structured data with token symbol and USD rate pairs"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update TotalAssetsDisplay component to calculate and display total portfolio value in USD using fetched exchange rates",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "can we get total assets to display USD value"
        ]
      },
      "acceptanceCriteria": [
        "TotalAssetsDisplay fetches exchange rates from the backend",
        "Component calculates total USD value by multiplying each token balance by its exchange rate",
        "USD total is displayed prominently alongside or instead of the selected denomination view",
        "Exchange rate data is cached appropriately with React Query",
        "Loading and error states are handled gracefully"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add USD value display for individual token balances on the dashboard",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ]
      },
      "acceptanceCriteria": [
        "Each BalanceCard shows the token amount and its equivalent USD value",
        "USD value is calculated using the real-time exchange rate for that token",
        "USD amounts are formatted with appropriate decimal places and currency symbol"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Remove the note 'Exchange rate conversion not yet implemented' from the UI once USD conversion is functional",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Note: Total shown in selected denomination. Exchange rate conversion not yet implemented"
        ]
      },
      "acceptanceCriteria": [
        "The disclaimer about missing exchange rate conversion is removed from TotalAssetsDisplay",
        "UI reflects that real exchange rates are now being used"
      ]
    }
  ],
  "constraints": [
    "Must use ICPSwap oracle on the Internet Computer for exchange rate data",
    "Exchange rates must be fetched from the backend, not directly from frontend",
    "Maintain the existing single-actor backend architecture",
    "Do not modify Internet Identity authentication flow or immutable frontend paths"
  ],
  "nonGoals": [
    "Historical exchange rate tracking or charts",
    "Support for fiat currency deposits or withdrawals",
    "Price alerts or notifications",
    "Support for currencies other than USD"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}