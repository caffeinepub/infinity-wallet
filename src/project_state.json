{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Infinity Wallet with multi-token support (Infinity Coin, ckBTC, ckETH, ckUSDC, ckUSDT). Critical bug: ckBTC wallet address generation failing due to Principal serialization issue in ckBTC minter integration.",
  "architectural_notes": [
    "ckBTC minter canister requires proper Candid Principal type formatting, not JSON serialized objects",
    "Bitcoin deposit address generation uses ckBTC minter's update_balance method, separate from ledger queries"
  ],
  "known_issues": [
    "ckBTC wallet address generation fails with 'Invalid opt principal argument' - Principal being sent as JSON object instead of Candid type to minter canister"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-fix-the-principal-serialization-issue-in-useckbtcdepositaddress-hook-where-the-principal-is-being-sent-as-a-json-object-principal-instead-of-a-proper-candid-principal-type-when-calling-the-ckbtc-minter-s-get-btc-address-method",
      "title": "Fix the Principal serialization issue in useCkBtcDepositAddress hook where the Principal is being sent as a JSON object {\"__principal__\":\"...\"} instead of a proper Candid Principal type when calling the ckBTC minter's get_btc_address method",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-principal-serialization-issue-in-useckbtcdepositstatus-hook-where-the-principal-is-being-sent-as-a-json-object-instead-of-a-proper-candid-principal-type-when-calling-the-ckbtc-minter-s-update-balance-method",
      "title": "Fix the Principal serialization issue in useCkBtcDepositStatus hook where the Principal is being sent as a JSON object instead of a proper Candid Principal type when calling the ckBTC minter's update_balance method",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [],
  "projectName": "Infinity Wallet",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}